<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secure Client Portal â€“ Early Access</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#001f54;       /* Navy */
      --text:#ffffff;     /* White */
      --muted:#cfd8ff;    /* Soft white/blue for hints */
      --accent:#ff4900;   /* Orange button + focus */
      --accent-hover:#e04100;
      --input-bg:rgba(255,255,255,0.04);
      --input-border:rgba(255,255,255,0.28);
      --input-border-focus:#ff4900;
      --shadow:0 8px 28px rgba(0,0,0,0.35);
      --radius:12px;
    }

    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      min-height:100svh;
      display:grid;
      place-items:center;
      padding: clamp(16px, 4vw, 40px);
    }

    .card{
      width:min(760px, 100%);
      padding: clamp(24px, 4vw, 48px);
      border-radius: var(--radius);
      background: rgba(255,255,255,0.03);
      box-shadow: var(--shadow);
    }

    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom: clamp(22px, 2.4vw, 28px);
    }
    .brand img{
      width:160px;
      height:auto;
      display:block;
      filter: drop-shadow(0 2px 10px rgba(0,0,0,0.4));
    }

    h1{
      font-size: clamp(28px, 4.6vw, 48px);
      line-height:1.15;
      font-weight:800;
      margin: 8px 0 8px;
      letter-spacing: 0.2px;
    }
    .lede{
      color: var(--muted);
      font-size: clamp(16px, 2.2vw, 22px);
      margin: 0 0 28px;
    }

    form{ margin-top: 10px; }

    label{
      display:block;
      font-weight:700;
      margin: 14px 0 6px;
    }
    .req{ color: var(--accent); }

    .hint{
      color: var(--muted);
      font-size: 0.95rem;
      margin-bottom: 10px;
    }

    input[type="text"],
    input[type="email"]{
      appearance:none;
      width:100%;
      padding:16px 14px;
      font-size:1.05rem;
      color: var(--text);
      background: var(--input-bg);
      border:1px solid var(--input-border);
      border-radius:10px;
      outline:none;
      transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
      margin-bottom: 16px;
    }
    input::placeholder{ color: rgba(255,255,255,0.6); }
    input:focus{
      border-color: var(--input-border-focus);
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 35%, transparent);
      background: rgba(255,255,255,0.06);
    }

    .actions{
      margin-top:18px;
      display:flex;
      gap:12px;
      align-items:center;
      flex-wrap:wrap;
    }

    button[type="submit"]{
      background: var(--accent);
      color: #fff;
      border:0;
      padding:14px 22px;
      font-weight:800;
      font-size:1.05rem;
      border-radius:10px;
      cursor:pointer;
      transition: background .18s ease, transform .06s ease;
    }
    button[type="submit"]:hover{ background: var(--accent-hover); }
    button[type="submit"]:active{ transform: translateY(1px); }

    .msg{
      min-height: 1.6em;
      font-size: 0.98rem;
      color: var(--muted);
    }
    .msg.success{ color:#38f18b; }
    .msg.error{ color:#ff8a7a; }

    .privacy{
      margin-top: 14px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    .privacy a{
      color: var(--accent);
      text-decoration: underline;
    }

    /* --- Success Modal --- */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: grid;
      place-items: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease;
      z-index: 1000;
    }
    .modal-backdrop.open{
      opacity: 1;
      pointer-events: auto;
    }
    .modal{
      width: min(640px, 92vw);
      background: #061c3c;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 14px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.5);
      padding: 28px;
      transform: translateY(10px) scale(.98);
      transition: transform .2s ease;
    }
    .modal-backdrop.open .modal{
      transform: translateY(0) scale(1);
    }
    .modal h2{
      margin: 0 0 10px;
      font-size: clamp(22px, 3.6vw, 30px);
      font-weight: 800;
    }
    .modal p{
      font-size: 1.05rem;
      line-height: 1.55;
      margin: 0 0 12px;
    }
    .modal .disclaimer{
      color: var(--muted);
      font-size: 0.95rem;
      margin-top: 6px;
    }
    .modal .countdown{
      color: var(--muted);
      font-weight: 700;
    }
    .modal .close-btn{
      margin-top: 18px;
      background: var(--accent);
      color: #fff;
      border: 0;
      border-radius: 10px;
      padding: 12px 18px;
      font-weight: 800;
      cursor: pointer;
      transition: background .18s ease, transform .06s ease;
    }
    .modal .close-btn:hover{ background: var(--accent-hover); }
    .modal .close-btn:active{ transform: translateY(1px); }
  </style>
</head>
<body>
  <main class="card" role="main">
    <div class="brand" aria-label="Logo">
      <img src="https://pritsinghlaw.com/whitenobg.svg" alt="Firm logo" />
    </div>

    <h1>Secure Client Portal With Real-Time Updates &amp; Instant Messaging + AI Assistant</h1>
    <p class="lede">Share your details here for early access.</p>

    <!-- Formspree AJAX form -->
    <form id="early-access" method="POST" novalidate>
      <input type="hidden" id="formEndpoint" value="https://formspree.io/f/YOUR_FORMSPREE_ID" />
      <input type="hidden" id="redirectUrl" value="/" />
      <input type="hidden" id="redirectDelay" value="10000" />

      <label for="name">Name <span class="req">*</span></label>
      <input
        id="name"
        name="name"
        type="text"
        placeholder="Your full name"
        required
        aria-required="true"
      />

      <label for="email">Email <span class="req">*</span></label>
      <div class="hint">Email you used to sign up</div>
      <input
        id="email"
        name="email"
        type="email"
        inputmode="email"
        autocomplete="email"
        placeholder="you@example.com"
        required
        aria-required="true"
      />

      <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="position:absolute; left:-5000px; opacity:0;" aria-hidden="true" />
      <input type="hidden" name="_subject" value="New Early Access Signup" />

      <div class="actions">
        <button type="submit" id="submitBtn">Submit</button>
        <div id="formMsg" class="msg" role="status" aria-live="polite"></div>
      </div>

      <div class="privacy">
        By signing up, you agree to our <a href="/privacy" target="_blank" rel="noopener">Privacy Policy</a>.
      </div>
    </form>
  </main>

  <!-- Success Modal -->
  <div id="successBackdrop" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="successTitle" aria-describedby="successBody">
      <h2 id="successTitle">Success ðŸŽ‰</h2>
      <p id="successBody">
        Great! Weâ€™ll let you know as soon as our early access program commences in a few weeks. Your support and participation is highly appreciated.
      </p>
      <p class="disclaimer">
        You will be redirected to our homepage shortly <span class="countdown" id="countdownText"></span>.
      </p>
      <p class="disclaimer">
        If youâ€™re not automatically redirected within 10 seconds, <a id="manualRedirect" href="/">click here</a>.
      </p>
      <button class="close-btn" id="closeModalBtn" type="button">Close</button>
    </div>
  </div>

  <script>
    (function(){
      const form = document.getElementById('early-access');
      const msg  = document.getElementById('formMsg');
      const btn  = document.getElementById('submitBtn');
      const endpointInput = document.getElementById('formEndpoint');
      const redirectUrlInput = document.getElementById('redirectUrl');
      const redirectDelayInput = document.getElementById('redirectDelay');

      const backdrop = document.getElementById('successBackdrop');
      const closeBtn = document.getElementById('closeModalBtn');
      const countdownText = document.getElementById('countdownText');
      const manualRedirect = document.getElementById('manualRedirect');

      let lastFocused = null;
      let redirectTimer = null;
      let countdownTimer = null;

      function setState(state, text){
        msg.className = 'msg ' + (state || '');
        msg.textContent = text || '';
      }

      function validateEmail(value){
        return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);
      }

      function openModal(delayMs, url){
        lastFocused = document.activeElement;
        backdrop.classList.add('open');
        backdrop.removeAttribute('aria-hidden');
        closeBtn.focus();

        manualRedirect.href = url;

        let remaining = Math.floor(delayMs / 1000);
        function renderCount(){
          countdownText.textContent = remaining > 0 ? `(redirecting in ${remaining}s)` : '';
        }
        renderCount();
        countdownTimer = setInterval(() => {
          remaining -= 1;
          renderCount();
          if(remaining <= 0){ clearInterval(countdownTimer); }
        }, 1000);

        redirectTimer = setTimeout(() => {
          window.location.href = url;
        }, delayMs);

        backdrop.addEventListener('click', (e) => {
          if(e.target === backdrop) closeModal();
        }, { once:true });

        document.addEventListener('keydown', escListener);
      }

      function closeModal(){
        backdrop.classList.remove('open');
        backdrop.setAttribute('aria-hidden', 'true');
        if(lastFocused) lastFocused.focus();
        document.removeEventListener('keydown', escListener);
        if(redirectTimer){ clearTimeout(redirectTimer); redirectTimer = null; }
        if(countdownTimer){ clearInterval(countdownTimer); countdownTimer = null; countdownText.textContent=''; }
      }

      function escListener(e){
        if(e.key === 'Escape'){ closeModal(); }
      }

      closeBtn.addEventListener('click', closeModal);

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        setState('', '');

        const email = form.email.value.trim();
        const name = form.name.value.trim();
        if(!name){
          setState('error', 'Please enter your name.');
          form.name.focus();
          return;
        }
        if(!validateEmail(email)){
          setState('error', 'Please enter a valid email address.');
          form.email.focus();
          return;
        }

        const data = new FormData(form);
        btn.disabled = true;
        btn.textContent = 'Submittingâ€¦';

        try{
          const endpoint = endpointInput.value;
          const res = await fetch(endpoint, {
            method: 'POST',
            body: data,
            headers: { 'Accept': 'application/json' }
          });

          if(res.ok){
            form.reset();
            setState('success', 'Thanks! Youâ€™re on the list.');
            const url = redirectUrlInput.value || '/';
            const delay = parseInt(redirectDelayInput.value || '10000', 10);
            openModal(delay, url);
          }else{
            const err = await res.json().catch(() => ({}));
            const msgText = err && err.errors && err.errors[0] ? err.errors[0].message : 'Something went wrong. Please try again.';
            setState('error', msgText);
          }
        }catch(_err){
          setState('error', 'Network error. Check your connection and try again.');
        }finally{
          btn.disabled = false;
          btn.textContent = 'Submit';
        }
      });
    })();
  </script>
</body>
</html>